# 音声花火ゲーム アプリケーション概要

## 概要

音声花火ゲームは、音声認識技術とHTML5 Canvasを使用したインタラクティブなWebアプリケーションです。ユーザーが音声またはテキストで入力した文字列を、美しい花火のパーティクルエフェクトとして画面に表示します。

## 主な特徴

### 🎤 音声認識機能
- ブラウザの音声認識APIを活用した日本語音声入力
- リアルタイムでの音声認識とフィードバック
- 音声認識非対応ブラウザでは自動的にテキスト入力モードに切り替え

### 🎆 花火エフェクト
- 入力されたテキストを粒子化して花火として表示
- 2段階のアニメーション（文字形状保持→拡散）
- 黄色からオレンジ系の美しい色合い
- スムーズなフェードアウト効果

### 📱 レスポンシブデザイン
- デスクトップとモバイルの両方に対応
- 画面サイズに応じた自動レイアウト調整
- タッチ操作にも対応

## 技術仕様

### アーキテクチャ
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **グラフィックス**: HTML5 Canvas API
- **音声認識**: Web Speech API (webkitSpeechRecognition)
- **依存関係**: なし（外部ライブラリ不使用）

### パフォーマンス
- 60FPSの滑らかなアニメーション
- 効率的なメモリ管理（死んだ粒子の自動削除）
- デバウンス機能によるリサイズイベントの最適化

## 使用方法

### 1. 音声入力
1. 「🎤 音声認識開始」ボタンをクリック
2. マイクに向かって日本語で話す
3. 音声が認識されると自動的に花火が打ち上がる

### 2. テキスト入力
1. テキスト入力フィールドに文字を入力
2. 「🎆 打ち上げ」ボタンをクリックまたはEnterキーを押す
3. 入力したテキストが花火として表示される

## システム要件

### 対応ブラウザ
- **推奨**: Google Chrome, Safari, Microsoft Edge
- **音声認識**: WebkitSpeechRecognition API対応ブラウザ
- **フォールバック**: 音声認識非対応ブラウザでもテキスト入力は利用可能

### 環境要件
- **HTTPS**: 音声認識機能はHTTPS環境またはlocalhostでのみ動作
- **マイク**: 音声入力にはマイクが必要
- **JavaScript**: 有効化が必要

## アプリケーション構成

### ファイル構成
```
speech-fireworks-game/
├── index.html          # メインアプリケーションファイル
├── package.json        # プロジェクト設定
├── 要件.md            # 要件定義書
└── アプリケーション概要.md  # このファイル
```

### クラス構成
- **FireworksGame**: メインゲームクラス
  - 音声認識の管理
  - キャンバスの設定と管理
  - イベントリスナーの設定
  - ゲームループの制御

- **Particle**: パーティクルクラス
  - 個々の粒子の状態管理
  - アニメーション処理
  - 描画処理

## 設定可能なパラメータ

アプリケーションの動作は以下の設定で調整可能です：

```javascript
CONFIG = {
    DOT_GAP: 3,           // ドットのサンプリング間隔（粒子密度）
    HOLD_MS: 1000,        // 文字形状を保持する時間（ミリ秒）
    SPREAD_SPEED: 2,      // 拡散速度
    FADE_SPEED: 0.02,     // フェード速度
    MAX_LIFE: 1.0,        // 粒子の最大寿命
    FONT_SIZE_BASE: 120,  // ベースフォントサイズ
    FONT_SIZE_MIN: 40,    // 最小フォントサイズ
    MAX_TEXT_WIDTH: 0.8   // 画面幅に対する最大テキスト幅
}
```

## エラーハンドリング

### 音声認識エラー
- マイクアクセス拒否時の適切なメッセージ表示
- 音声認識失敗時のフィードバック
- 非対応ブラウザでの自動フォールバック

### 入力制限
- 最大50文字の入力制限
- 空文字列の入力防止
- 特殊文字の適切な処理

## 今後の拡張予定

### 機能拡張
- 複数色の花火パターン
- 音声による花火の種類選択
- アニメーション効果の追加
- 音響効果の追加

### 技術拡張
- WebGLを使用した3Dエフェクト
- Web Audio APIを使用した音響効果
- PWA化によるオフライン対応
- モバイルアプリ化

## 開発・保守

### 開発方針
- 外部依存関係の最小化
- シンプルで理解しやすいコード構造
- 設定の一元管理
- 適切なエラーハンドリング

### 保守性
- クラスベースの設計による保守性の向上
- 設定パラメータの外部化
- イベント処理の適切な管理
- メモリリークの防止

このアプリケーションは、音声認識技術と視覚的エフェクトを組み合わせた、教育的で楽しいWebアプリケーションです。技術的な実装の参考としても、エンターテイメントとしても活用できる設計となっています。
